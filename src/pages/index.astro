---
import Layout from '~/layouts/PageLayout.astro';

import Header from '~/components/widgets/Header.astro';
import Hero from '~/components/widgets/Hero.astro';
import AdvancedHero from '~/components/widgets/AdvancedHero.astro';
import Features from '~/components/widgets/Features.astro';
import AdvancedFeatures from '~/components/widgets/AdvancedFeatures.astro';
import Steps2 from '~/components/widgets/Steps2.astro';
import Content from '~/components/widgets/Content.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Button from '~/components/ui/Button.astro';
import { Icon } from 'astro-icon/components';

import FAQs from '~/components/widgets/FAQs.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import { initAnimations } from '~/utils/scrollAnimations.js';

// Import demo video
import molyDemoVideo from '~/assets/videos/moly-chat-demo.mov';

const metadata = {
  title: 'Moly App - Open-Source Cross-Platform AI LLM Voice Chat Client',
};
---

<Layout metadata={metadata}>
  <Fragment slot="header">
    <Header
      position="left"
      links={[
        { text: 'Features', href: '#features' },
        { text: 'Demo', href: '#demo' },
        { text: 'Download', href: '#download' },
        { text: 'FAQs', href: '#faqs' },
      ]}
      isSticky
      showToggleTheme
      actions={[
        {
          variant: 'secondary',
          text: 'Github',
          href: 'https://github.com/moly-ai/moly-ai',
          target: '_blank',
          icon: 'tabler:brand-github',
        },
        {
          variant: 'primary',
          text: 'Download',
          href: 'https://github.com/moly-ai/moly-ai/releases',
          target: '_blank',
          icon: 'tabler:download',
        },
      ]}
    />
  </Fragment>

  <!-- Hero2 Widget ******************* -->

  <AdvancedHero
    enableAnimatedBackground={true}
    enableScrollingTags={true}
    tags={[
      { text: 'Web', icon: 'ðŸŒ' },
      { text: 'Real-time', icon: 'âš¡' },
      { text: 'AI Voice Chat', icon: 'ðŸŽ¤' },
      { text: 'Robius', icon: 'ðŸ”§' },
      { text: 'Native', icon: 'ðŸ’»' },
      { text: 'Fast', icon: 'âš¡' },
      { text: 'Local LLMs', icon: 'ðŸ ' },
      { text: 'OpenAI', icon: 'ðŸ§ ' },
      { text: 'Mobile', icon: 'ðŸ“±' },
      { text: 'Makepad', icon: 'ðŸŽ¨' },
      { text: 'Moly Local', icon: 'ðŸ–¥ï¸' },
      { text: 'Privacy', icon: 'ðŸ”’' },
      { text: 'Offline', icon: 'ðŸ“±' },
      { text: 'Chat', icon: 'ðŸ’¬' },
      { text: 'Cross-Platform', icon: 'ðŸŒ' },
      { text: 'WASM', icon: 'ðŸŒ' },
      { text: 'Open-Source', icon: 'â­' },
      { text: 'Desktop', icon: 'ðŸ’»' },
      { text: 'MoFa', icon: 'ðŸ¤–' },
      { text: 'Agents', icon: 'ðŸ¤–' },
      { text: 'Moly Server', icon: 'ðŸ–¥ï¸' },
      { text: 'Secure', icon: 'ðŸ›¡ï¸' },
      { text: 'Models', icon: 'ðŸ§ ' },
      { text: 'Multi-platform', icon: 'ðŸ”„' },
      { text: 'Dora', icon: 'ðŸ”§' },
      { text: 'Rust', icon: 'ðŸ¦€' },
      { text: 'Download', icon: 'â¬‡ï¸' },
      { text: 'LLM', icon: 'ðŸ¤–' },
      { text: 'MolyKit', icon: 'ðŸ”§' },
      { text: 'MCP', icon: 'ðŸ”Œ' },
      { text: 'Moxin', icon: 'ðŸ”¥' },
      { text: 'OpenAI', icon: 'ðŸ§ ' },
      { text: 'Claude', icon: 'ðŸ§ ' },
      { text: 'GLM', icon: 'ðŸ§ ' },
    ]}
    tagline="Open-Source â€¢ AI â€¢ LLM â€¢ Voice â€¢ Chat â€¢ Client"
    actions={[
      {
        variant: 'primary',
        target: '_blank',
        text: 'Download Now',
        href: 'https://github.com/moly-ai/moly-ai/releases',
        icon: 'tabler:download',
      },
      { text: 'Learn more', href: '#features' },
    ]}
  >
    <Fragment slot="title">
      Moly AI App<br /><span class="text-green-600 dark:text-green-400">Your Cross-Platform<br /></span> AI Companion
    </Fragment>

    <Fragment slot="subtitle">
      Built in Rust. Connect to local and remote LLMs with a beautiful, fast, and secure <br />interface.
    </Fragment>
  </AdvancedHero>

  <!-- Advanced Features Widget *************** -->

  <AdvancedFeatures
    id="features"
    title="What is Moly App?"
    subtitle="Moly <span class='text-muted opacity-75 font-normal align-baseline inline-block'>(pronounced [moh-lee], like Holy)</span> is a powerful AI LLM client written in Rust, demonstrating the capabilities of the Makepad UI toolkit and Project Robius framework. It supports multiple AI providers including OpenAI-compatible services, local LLMs via Moly Server, and AI agents through MoFa servers. Whether you prefer cloud-based models or want complete privacy with local execution, Moly provides a unified, beautiful interface for all your AI interactions."
    columns={3}
    cardTheme="glassmorphism"
    enableAnimation={true}
    items={[
      {
        title: 'Cross-Platform Compatibility',
        description:
          'Built with Rust and Makepad, Moly runs natively on macOS, Linux, Windows, and eventually on iOS, Android and in your web browser.',
        icon: 'tabler:device-desktop',
        theme: 'nebula',
        backContent:
          'Experience seamless AI interaction across all your devices. Native performance, consistent interface, and synchronized conversations everywhere.',
        flip: true,
      },
      {
        title: 'Local and Remote LLM Support',
        description: `Connect to OpenAI, Anthropic, and other cloud providers, or run models locally with Moly Server. Complete privacy and flexibility.`,
        icon: 'tabler:cloud-computing',
        theme: 'solar',
        backContent:
          'Choose from cutting-edge cloud models or run open-source models locally. Switch between providers seamlessly without losing context.',
        flip: true,
      },
      {
        title: 'Lightning Fast Performance',
        description:
          'Built in Rust for maximum performance and memory safety. Experience instant responses and smooth interactions.',
        icon: 'tabler:rocket',
        theme: 'cosmic',
        backContent:
          'Blazing fast inference speeds, optimized memory usage, and native performance. Handle complex conversations without breaking a sweat.',
        flip: true,
      },
      {
        title: 'Open Source & Extensible',
        description: `Fully open source with Apache 2.0 license. Extend functionality with MolyKit and build custom AI applications.`,
        icon: 'tabler:code',
        theme: 'sunset',
        backContent:
          'Join our open-source community. Contribute to the project, extend functionality, or build your own AI-powered applications using our framework.',
        flip: true,
      },
      {
        title: 'Privacy-First Design',
        description: `Your conversations stay private. Use local models for complete privacy or choose cloud providers securely.`,
        icon: 'tabler:shield-lock',
        theme: 'ocean',
        backContent:
          'Complete data sovereignty with local models. End-to-end encryption for cloud conversations. You own your data, always.',
        flip: true,
      },
      {
        title: 'AI Agent Integration',
        description: `Connect to MoFa servers to interact with AI agents. Build and deploy custom AI workflows and automation.`,
        icon: 'tabler:robot',
        theme: 'steel',
        backContent:
          'Deploy custom AI agents, create automated workflows, and integrate with external services. Build sophisticated AI-powered solutions.',
        flip: true,
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-white dark:bg-slate-950"></div>
    </Fragment>
  </AdvancedFeatures>

  <!-- Video Demo Section *************** -->

  <section id="demo" class="py-12 md:py-20 bg-blue-50 dark:bg-slate-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <div class="text-center mb-8">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 dark:text-white">See Moly in Action</h2>
        <p class="text-lg text-muted dark:text-slate-300">
          Watch how Moly App makes AI interactions seamless and intuitive
        </p>
      </div>
      <div class="relative m-auto max-w-5xl">
        <div class="relative rounded-2xl overflow-hidden shadow-2xl bg-slate-900">
          <video class="mx-auto w-full" autoplay muted loop playsinline>
            <source src={molyDemoVideo} type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>
      </div>
    </div>
  </section>

  <!-- Content Widget **************** -->
  <!-- Use Cases Section - Temporarily Disabled
  <Content
    id="use-cases"
    title="Use cases"
    subtitle="Discover how Moly App serves developers, researchers, and AI enthusiasts across different scenarios."
    isReversed
    items={[
      {
        title: 'Extensible:',
        description:
          'Developers love Moly for its extensibility and performance. Built on the robust Makepad UI toolkit and Project Robius framework, Moly provides a solid foundation for AI application development. Use MolyKit widgets and utilities to build your own AI-powered applications.',
      },
      {
        title: 'Benefits:',
        description: `Access to MolyKit framework for building custom AI applications. <br /> Cross-platform deployment with a single codebase written in Rust. <br /> Integration with multiple AI providers and local model support. <br /> Open source architecture allowing full customization and contribution.`,
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
      alt: 'Developer workspace',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        For Developers: <br /><span class="text-2xl">Build the future of AI</span>
      </h3>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>
-->

  <!-- Content Widget **************** -->
  <!--
  <Content
    isAfterContent={true}
    items={[
      {
        title: 'Local First:',
        description: `Privacy-conscious users choose Moly for its local model support and data sovereignty. With Moly Server, you can download and run open-source LLMs entirely on your machine, ensuring your conversations never leave your device. Perfect for sensitive work or personal use.`,
      },
      {
        title: 'Benefits:',
        description: `Complete data privacy with local model execution. <br /> No internet connection required for local models. <br /> Support for popular open-source models like Llama, Mistral, and more. <br /> Easy model management with search, download, and switching capabilities. <br /> OpenAI-compatible API for seamless integration with existing tools.`,
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1563986768609-322da13575f3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
      alt: 'Privacy and Security',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        Privacy First: <br /><span class="text-2xl">Your data stays yours</span>
      </h3>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>
 -->
  <!-- Content Widget **************** -->
  <!-- For Researchers Section - Temporarily Disabled
  <Content
    isReversed
    isAfterContent={true}
    items={[
      {
        title: 'Multiple Sessions:',
        description: `Researchers and AI enthusiasts use Moly to experiment with cutting-edge language models. Compare different models side-by-side, test prompts across multiple providers, and explore the latest developments in AI. The flexible provider system supports both established and emerging AI services.`,
      },
      {
        title: 'Benefits:',
        description: `Easy switching between different AI models and providers. <br /> Support for latest models from OpenAI, Anthropic, and other providers. <br /> Integration with AI agent frameworks like MoFa for advanced workflows. <br /> Clean, distraction-free interface optimized for extended research sessions.`,
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1472&q=80',
      alt: 'Research and AI',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        For Researchers: <br /><span class="text-2xl">Explore AI frontiers</span>
      </h3>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>
-->

  <!-- Content Widget **************** -->
  <!-- Cross-Platform Deployment Section - Temporarily Disabled
  <Content
    items={[
      {
        title: 'Versatility:',
        description: `Experience true cross-platform deployment with Moly. Built with Rust and the Makepad framework, the same codebase runs natively on desktop (macOS, Linux, Windows), in web browsers, and on mobile devices. No compromises on performance or user experience across platforms.`,
      },
      {
        title: 'Benefits:',
        description: `Single codebase for all platforms reduces development time. <br /> Native performance on each platform without sacrificing features. <br /> Consistent user experience whether on desktop, web, or mobile. <br /> Easy packaging and distribution with built-in tools for all major platforms.`,
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80',
      alt: 'Cross-platform development',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        Cross-Platform Deployment: <br /><span class="text-2xl">One app, everywhere</span>
      </h3>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>
-->

  <CallToAction
    id="download"
    title="Join the AI Revolution"
    subtitle="Experience the future of AI chat with Moly. Cross-platform, privacy-focused, and built for speed. Connect to local and remote LLMs with one beautiful interface."
  >
    <!-- tagline="Download now for macOS, Windows, Linux, Android, and Web" -->

    <div slot="actions">
      <!-- Buttons Row -->
      <div class="flex max-w-md gap-4 mx-auto mb-8">
        <Button
          variant="primary"
          target="_blank"
          text="Download Now"
          href="https://github.com/moly-ai/moly-ai/releases"
          icon="tabler:download"
          class="min-w-[140px]"
        />
        <Button
          variant="secondary"
          target="_blank"
          text="View Source Code"
          href="https://github.com/moly-ai/moly-ai"
          icon="tabler:brand-github"
          class="min-w-[160px]"
        />
      </div>

      <!-- Platform Availability Row -->
      <div class="mt-6">
        <p class="text-sm text-muted dark:text-slate-400 mb-4">Available on all major platforms</p>
        <div class="flex justify-center items-center gap-2 flex-wrap max-w-3xl mx-auto">
          <div
            class="platform-badge flex items-center gap-2 px-2 py-1.5 bg-gray-100 dark:bg-gray-800/60 rounded-lg border border-gray-200 dark:border-gray-700 text-xs"
          >
            <Icon name="tabler:brand-apple" class="w-4 h-4" />
            <span class="text-gray-600 dark:text-slate-300">macOS</span>
          </div>
          <div
            class="platform-badge flex items-center gap-2 px-2 py-1.5 bg-gray-100 dark:bg-gray-800/60 rounded-lg border border-gray-200 dark:border-gray-700 text-xs"
          >
            <Icon name="tabler:brand-windows" class="w-4 h-4" />
            <span class="text-gray-600 dark:text-slate-300">Windows</span>
          </div>
          <div
            class="platform-badge flex items-center gap-2 px-2 py-1.5 bg-gray-100 dark:bg-gray-800/60 rounded-lg border border-gray-200 dark:border-gray-700 text-xs"
          >
            <Icon name="tabler:devices" class="w-4 h-4" />
            <span class="text-gray-600 dark:text-slate-300">Linux</span>
          </div>
          <div
            class="platform-badge flex items-center gap-2 px-2 py-1.5 bg-gray-100 dark:bg-gray-800/60 rounded-lg border border-gray-200 dark:border-gray-700 text-xs"
          >
            <Icon name="tabler:brand-apple" class="w-4 h-4" />
            <span class="text-gray-600 dark:text-slate-300">iOS</span>
          </div>
          <div
            class="platform-badge flex items-center gap-2 px-2 py-1.5 bg-gray-100 dark:bg-gray-800/60 rounded-lg border border-gray-200 dark:border-gray-700 text-xs"
          >
            <Icon name="tabler:brand-android" class="w-4 h-4" />
            <span class="text-gray-600 dark:text-slate-300">Android</span>
          </div>
          <div
            class="platform-badge flex items-center gap-2 px-2 py-1.5 bg-gray-100 dark:bg-gray-800/60 rounded-lg border border-gray-200 dark:border-gray-700 text-xs"
          >
            <Icon name="tabler:world" class="w-4 h-4" />
            <span class="text-gray-600 dark:text-slate-300">Web</span>
          </div>
        </div>
      </div>
    </div>
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-white dark:bg-slate-950"></div>
    </Fragment>
  </CallToAction>

  <!-- Platform Stability Note -->
  <section class="pb-12 md:pb-20 bg-white dark:bg-slate-950">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <div class="max-w-4xl mx-auto">
        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
          <div class="flex items-start gap-3">
            <Icon name="tabler:info-circle" class="w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0" />
            <div class="text-sm text-left">
              <p class="text-blue-800 dark:text-blue-200 font-medium mb-1 text-left">Platform Availability</p>
              <p class="text-blue-700 dark:text-blue-300 text-left">
                The macOS version is currently the most stable and feature-complete platform. Other platforms (Windows,
                Linux, iOS, Android, and Web) are in active development and may have limited functionality compared to
                macOS.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQs Widget ******************* -->

  <FAQs
    id="faqs"
    title="Frequently Asked Questions"
    items={[
      {
        title: 'What platforms does Moly App support?',
        description:
          'Moly App runs natively on macOS, Linux, and Windows. It also works in web browsers and has experimental support for Android and iOS. All platforms share the same codebase and feature set.',
        icon: 'tabler:chevrons-right',
      },
      {
        title: 'Can I use Moly App with local models for privacy?',
        description: `Absolutely! Moly App supports local model execution through Moly Server. You can download and run open-source models like Llama, Mistral, and others entirely on your machine without sending data to external servers.`,
        icon: 'tabler:chevrons-right',
      },
      {
        title: 'Is Moly App really free and open source?',
        description:
          'Yes, Moly App is completely free and licensed under Apache 2.0. You can use it for personal and commercial purposes, modify the source code, and contribute to the project. There are no hidden costs or premium features.',
        icon: 'tabler:chevrons-right',
      },
      {
        title: 'How do I add my own AI provider to Moly?',
        description: `Moly supports any OpenAI-compatible API. You can add custom providers through the Providers Dashboard, or contribute new providers to the project. The MolyKit framework also allows building custom integrations.`,
        icon: 'tabler:chevrons-right',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-slate-900"></div>
    </Fragment>
  </FAQs>

  <!-- Steps2 Widget ****************** -->

  <Steps2
    title="Get Help & Connect"
    subtitle="Need assistance or want to contribute? Connect with the Moly App community!"
    callToAction={{
      text: 'Join the Discord',
      href: 'https://discord.gg/g2S5ESMz4Q',
      target: '_blank',
    }}
    items={[
      {
        title: 'Report Issues',
        description: 'github.com/moly-ai/moly-ai/issues',
        icon: 'tabler:bug',
      },
      {
        title: 'Discussions',
        description: 'Community support and ideas',
        icon: 'tabler:messages',
      },
      {
        title: 'Contribute',
        description: 'Help improve Moly App',
        icon: 'tabler:git-branch',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-white dark:bg-slate-950"></div>
    </Fragment>
  </Steps2>

  <!-- BlogLatestPost Widget **************** -->

  <!--

  <BlogLatestPosts
    id="blog"
    title="Stay updated with Moly App"
    information={`Explore our collection of articles about AI development, local models, cross-platform development with Rust, and the latest features in Moly App.`}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </BlogLatestPosts>

  -->
</Layout>

<script>
  // Function to initialize scroll animations
  const initScrollAnimations = () => {
    // Import and initialize animations
    import('../utils/scrollAnimations.js')
      .then((module) => {
        module.initAnimations();
      })
      .catch((err) => {
        console.warn('Could not load scroll animations:', err);
      });
  };

  // Initialize animations when the page loads
  document.addEventListener('DOMContentLoaded', initScrollAnimations);

  // Also initialize animations after Astro page navigation (swapping)
  document.addEventListener('astro:page-load', initScrollAnimations);

  // Re-trigger hero animations on navigation
  document.addEventListener('astro:page-load', () => {
    // Reset hero content opacity for re-animation
    const heroButton = document.querySelector('[data-hero-button]');
    if (heroButton) {
      heroButton.classList.add('opacity-0', 'translate-y-2', 'pointer-events-none');
      heroButton.classList.remove('pointer-events-auto');
    }

    // Reset scrolling tags opacity
    const scrollingTags = document.getElementById('scrolling-tags');
    if (scrollingTags) {
      scrollingTags.style.opacity = '0';
    }
  });
</script>
